<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="description" content="BestLife Habit Tracker">
  <title>BestLife</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
</head>
<body>
  <header class="title-bar">
    <h1>BestLife</h1>
    <h6 id="current-date"></h6>
  </header>

  <!-- Main Area -->
  <main id="content">
    <section id="habit-tracker" class="tab">
      <button id="add-habit-btn" onclick="openHabitCreationModal()">+</button>
      <div id="habit-list"></div>
    </section>
    
    <section id="workout-manager" class="tab">
      <p>Workout Manager (coming soon)</p>
    </section>
    
    <section id="settings" class="tab">
      <h2>Settings</h2>
      <div class="settings-item">
        <label for="calendar-order-toggle">Keep Calendar Day Order:</label>
        <input class="settings-toggle" type="checkbox" id="calendar-order-toggle">
      </div>
    </section>    
  </main>

  <!-- Menu Bar -->
  <nav class="menu-bar">
    <button class="tab-button" onclick="showTab('settings')">⚙️</button>
    <button class="tab-button" onclick="showTab('habit-tracker')">📋</button>
    <button class="tab-button" onclick="showTab('workout-manager')">🏋️</button>
  </nav>

  <!-- Habit Detail View Modal -->
  <div id="habit-detail" class="modal">
    <div class="modal-content">
      <button class="close-btn" onclick="closeHabitDetail()">🡄</button>
      <h2 id="habit-detail-name"></h2>
      <p id="habit-detail-description"></p>
      
      <!-- Monthly Completion Calendar -->
      <h3>Completion Calendar</h3>
      <div class="calendar-month-selector">
        <button id="prev-month">‹</button>
        <span id="calendar-month-name"></span>
        <button id="next-month">›</button>
      </div>
      <div id="completion-calendar"></div>
    
      <!-- Progress Chart -->
      <h3>Last 20 Days Progress</h3>
      <canvas id="habit-progress-chart" width="400" height="200"></canvas>

    </div>  
  </div>  

  <!-- Habit Creation Modal -->
  <div id="habit-creation" class="modal">
      <div class="modal-content">
          <button class="close-btn" onclick="closeHabitCreationModal()">🡄</button>
          <form id="habit-form">
              <label>Name: <input type="text" id="habit-name" placeholder="Drink Water" autocomplete="off" /></label>
              <label>Description: <textarea id="habit-description" autocomplete="off"></textarea></label>
              
              <!-- Dropdown selection for habit type -->
              <label>Habit Type:
                  <select id="habit-type" style="background: #2e2e2e; color: #f5f5f5; border: 1px solid #444; border-radius: 8px; padding: 0.8rem;">
                      <option value="0">Default</option>
                      <option value="1">Track Variable Habits</option>
                  </select>
              </label>

              <div>
                  <label>Color:</label>
                  <div class="color-selection" id="color-selection">
                      <!-- Preset pastel colors -->
                      <div class="color-option" style="background-color: #ffadad;"></div>
                      <div class="color-option" style="background-color: #ffd6a5;"></div>
                      <div class="color-option" style="background-color: #fdffb6;"></div>
                      <div class="color-option" style="background-color: #caffbf;"></div>
                      <div class="color-option" style="background-color: #9bf6ff;"></div>
                      <div class="color-option" style="background-color: #a0c4ff;"></div>
                      <!-- Rainbow option for custom color picker -->
                      <div class="color-option rainbow" id="custom-color-trigger"></div>
                  </div>
                  <!-- Hidden color input for custom color selection -->
                  <input type="color" id="custom-color-picker" style="display: none;" />
              </div>

              <label>Symbol: <input type="text" id="habit-symbol" placeholder="☺️" maxlength="5" autocomplete="off" /></label>
              <label>Goal per Day: <input type="number" id="habit-frequency" placeholder="1" min="1" /></label>
              <label>Reminder Time: <input type="time" id="habit-reminder" autocomplete="off" /></label>
              <button type="submit">Create Habit</button>
          </form>
      </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="app.js"></script>
  <script src="index.js" type="module"></script>
  <script src="notification.js" type="module"></script>
  <script src="storage.js" type="module"></script>
  <script src="habitTracker.js" type="module"></script>
  <script src="workoutManager.js" type="module"></script>
  <script src="settings.js" type="module"></script>
</body>
</html>
